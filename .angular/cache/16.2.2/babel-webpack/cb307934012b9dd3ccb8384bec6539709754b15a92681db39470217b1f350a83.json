{"ast":null,"code":"import { map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/product.service\";\nimport * as i2 from \"../image-processing.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../_services/user.service\";\nimport * as i5 from \"../_services/cart-service\";\nimport * as i6 from \"../_services/header.service\";\nimport * as i7 from \"../_services/wishList.service\";\nimport * as i8 from \"../_services/brand.service\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"@angular/material/button\";\nfunction ProductCategoryComponent_option_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r2.brandName, \" \");\n  }\n}\nfunction ProductCategoryComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15)(2, \"div\", 16)(3, \"a\", 17);\n    i0.ɵɵelement(4, \"i\", 18);\n    i0.ɵɵtext(5, \"Compare\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 19)(7, \"i\", 20);\n    i0.ɵɵlistener(\"click\", function ProductCategoryComponent_div_23_Template_i_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.addToWishList(product_r3.productId));\n    });\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"a\", 21);\n    i0.ɵɵelement(9, \"img\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 23)(11, \"a\", 24);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"h3\", 25);\n    i0.ɵɵelement(14, \"a\", 26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 27)(16, \"div\", 28)(17, \"span\", 29);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementStart(19, \"small\");\n    i0.ɵɵtext(20, \"00\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\", 30);\n    i0.ɵɵelement(22, \"i\", 31)(23, \"i\", 31)(24, \"i\", 31)(25, \"i\", 31)(26, \"i\", 31);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(27, \"div\", 32)(28, \"button\", 33);\n    i0.ɵɵlistener(\"click\", function ProductCategoryComponent_div_23_Template_button_click_28_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.addToCart(product_r3.productId));\n    });\n    i0.ɵɵelement(29, \"i\", 34);\n    i0.ɵɵtext(30, \"Add to Cart \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 35)(32, \"a\", 36);\n    i0.ɵɵlistener(\"click\", function ProductCategoryComponent_div_23_Template_a_click_32_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const product_r3 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.showProductDetails(product_r3.productId));\n    });\n    i0.ɵɵelement(33, \"i\", 37);\n    i0.ɵɵtext(34, \"Quick view\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(35, \"hr\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"src\", product_r3.productImages[0].url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r3.productName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"$\", product_r3.productDiscountedPrice, \".\");\n  }\n}\nexport let ProductCategoryComponent = /*#__PURE__*/(() => {\n  var _class;\n  class ProductCategoryComponent {\n    ngOnInit() {\n      this.getAllBrand();\n      if (this.categoryId != 0) {\n        this.searchProduct();\n      }\n      this.getCategoryId();\n      if (this.userService.forUser.name === null) {\n        this.getCartDetails();\n      }\n      this.getAllProducts();\n    }\n    constructor(productService, imageProcessingService, router, userService, cartService, headerService, wishListService, brandService) {\n      this.productService = productService;\n      this.imageProcessingService = imageProcessingService;\n      this.router = router;\n      this.userService = userService;\n      this.cartService = cartService;\n      this.headerService = headerService;\n      this.wishListService = wishListService;\n      this.brandService = brandService;\n      this.selectedSortValue = 0;\n      this.productBrandId = 0;\n      this.categoryId = 0;\n      this.searchTerm = '';\n      this.pageNumber = 0;\n      this.showLoadButton = false;\n      this.productDetails = [];\n      this.brandArr = [];\n      this.cartDetails = [];\n    }\n    getAllProducts() {\n      this.productService.getAllProducts(this.pageNumber, this.searchTerm, this.categoryId, this.productBrandId, this.selectedSortValue).pipe(map((x, i) => x.map(product => this.imageProcessingService.createImages(product)))).subscribe(resp => {\n        if (resp.length == 12) {\n          this.showLoadButton = true;\n        } else {\n          this.showLoadButton = false;\n        }\n        this.productDetails = [];\n        for (let i = 0; i < resp.length; i++) {\n          if (!this.productDetails.includes(resp[i])) {\n            this.productDetails[i] = resp[i];\n          } else {}\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n    getAllProductForCategory() {\n      this.productService.getAllProductsBaseOnTheCategory(this.pageNumber, this.searchTerm, this.categoryId).pipe(map((x, i) => x.map(product => this.imageProcessingService.createImages(product)))).subscribe(resp => {\n        if (resp.length == 12) {\n          this.showLoadButton = true;\n        } else {\n          this.showLoadButton = false;\n        }\n        this.productDetails = [];\n        for (let i = 0; i < resp.length; i++) {\n          if (!this.productDetails.includes(resp[i])) {\n            this.productDetails[i] = resp[i];\n          } else {}\n        }\n      }, err => {\n        console.log(err);\n      });\n    }\n    showProductDetails(productId) {\n      this.router.navigate(['/productViewDetails', {\n        productId: productId\n      }]);\n    }\n    loadMoreProduct() {\n      this.pageNumber = this.pageNumber + 1;\n      this.getAllProducts();\n    }\n    addToCart(productId) {\n      this.cartService.addToCart(productId);\n    }\n    getCartDetails() {\n      this.cartService.getCartDetails().subscribe(resp => {\n        this.cartDetails = resp;\n      });\n    }\n    searchProduct() {\n      this.headerService.search.subscribe(reps => {\n        this.searchTerm = reps;\n        console.log(this.searchTerm);\n        this.pageNumber = 0;\n        this.productDetails = [];\n        this.getAllProducts();\n      });\n    }\n    getCategoryId() {\n      this.headerService.categoryId.subscribe(reps => {\n        this.categoryId = reps;\n        this.brandService.categoryId.next(reps);\n        this.pageNumber = 0;\n        this.productDetails = [];\n        this.getAllProducts();\n        this.getAllBrand();\n      });\n    }\n    addToWishList(productId) {\n      this.wishListService.productId.next(productId);\n      this.wishListService.addNewWishList();\n    }\n    getAllBrand() {\n      this.brandService.getAllBrand().subscribe(resp => {\n        this.brandArr = resp;\n      });\n    }\n    onCategorySelected(event) {\n      if (event === 0) {\n        this.getAllProductForCategory();\n        this.getAllBrand();\n      } else {\n        this.productBrandId = event;\n        this.getAllProducts();\n        this.getAllBrand();\n      }\n      console.log(\"Selected brand ID: \" + this.productBrandId);\n    }\n    onSelectedSortValue(event) {\n      this.selectedSortValue = event;\n      console.log(this.selectedSortValue);\n      this.getAllProducts();\n    }\n  }\n  _class = ProductCategoryComponent;\n  _class.ɵfac = function ProductCategoryComponent_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.ImageProcessingService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.CartService), i0.ɵɵdirectiveInject(i6.HeaderService), i0.ɵɵdirectiveInject(i7.WishListService), i0.ɵɵdirectiveInject(i8.BrandService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-product-category\"]],\n    decls: 27,\n    vars: 5,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\", \"pt-2\", \"mx-n2\"], [1, \"col-12\", \"col-md-3\", \"d-md-flex\", \"justify-content-end\", \"align-items-center\", \"mb-4\"], [\"for\", \"sorting\", 1, \"form-label\", \"mb-md-0\", \"me-md-2\", \"pe-md-1\", \"fs-sm\", \"fw-normal\", \"text-nowrap\"], [\"id\", \"sorting\", 1, \"form-select\", 2, \"min-width\", \"222px\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"1\"], [\"value\", \"2\"], [\"value\", \"3\"], [\"value\", \"4\"], [3, \"value\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-lg-3 col-md-4 col-sm-6 px-2 mb-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", \"mt-5\", 2, \"padding-bottom\", \"100px\"], [\"type\", \"button\", \"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"col-lg-3\", \"col-md-4\", \"col-sm-6\", \"px-2\", \"mb-4\"], [1, \"card\", \"product-card\"], [1, \"product-card-actions\", \"d-flex\", \"align-items-center\"], [\"href\", \"#\", 1, \"btn-action\", \"nav-link-style\", \"me-2\"], [1, \"ci-compare\", \"me-1\"], [\"type\", \"button\", \"data-bs-toggle\", \"tooltip\", \"data-bs-placement\", \"left\", \"aria-label\", \"Add to wishlist\", \"data-bs-original-title\", \"Add to wishlist\", 1, \"btn-wishlist\", \"btn-sm\"], [1, \"ci-heart\", 3, \"click\"], [\"href\", \"shop-single-v2.html\", 1, \"card-img-top\", \"d-block\", \"overflow-hidden\"], [\"alt\", \"Product\", 3, \"src\"], [1, \"card-body\", \"py-2\"], [\"href\", \"#\", 1, \"product-meta\", \"d-block\", \"fs-xs\", \"pb-1\"], [1, \"product-title\", \"fs-sm\"], [\"href\", \"shop-single-v2.html\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"product-price\"], [1, \"text-accent\"], [1, \"star-rating\"], [1, \"star-rating-icon\", \"ci-star-filled\", \"active\"], [1, \"card-body\", \"card-body-hidden\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-sm\", \"d-block\", \"w-100\", \"mb-2\", 3, \"click\"], [1, \"ci-cart\", \"fs-sm\", \"me-1\"], [1, \"text-center\"], [\"data-bs-toggle\", \"modal\", 1, \"nav-link-style\", \"fs-ms\", 3, \"click\"], [1, \"ci-eye\", \"align-middle\", \"me-1\"], [1, \"d-sm-none\"]],\n    template: function ProductCategoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 1)(3, \"div\", 2)(4, \"label\", 3);\n        i0.ɵɵtext(5, \"Sort by:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ProductCategoryComponent_Template_select_ngModelChange_6_listener($event) {\n          return ctx.selectedSortValue = $event;\n        })(\"ngModelChange\", function ProductCategoryComponent_Template_select_ngModelChange_6_listener($event) {\n          return ctx.onSelectedSortValue($event);\n        });\n        i0.ɵɵelementStart(7, \"option\", 5);\n        i0.ɵɵtext(8, \"Low - High Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"option\", 6);\n        i0.ɵɵtext(10, \"High - Low Price\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"option\", 7);\n        i0.ɵɵtext(12, \"A - Z Order\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"option\", 8);\n        i0.ɵɵtext(14, \"Z - A Order\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(15, \"div\", 2)(16, \"label\", 3);\n        i0.ɵɵtext(17, \"Brand:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\")(19, \"select\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function ProductCategoryComponent_Template_select_ngModelChange_19_listener($event) {\n          return ctx.productBrandId = $event;\n        })(\"ngModelChange\", function ProductCategoryComponent_Template_select_ngModelChange_19_listener($event) {\n          return ctx.onCategorySelected($event);\n        });\n        i0.ɵɵelementStart(20, \"option\", 9);\n        i0.ɵɵtext(21, \"Select Brand\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(22, ProductCategoryComponent_option_22_Template, 2, 2, \"option\", 10);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(23, ProductCategoryComponent_div_23_Template, 36, 3, \"div\", 11);\n        i0.ɵɵelementStart(24, \"div\", 12)(25, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function ProductCategoryComponent_Template_button_click_25_listener() {\n          return ctx.loadMoreProduct();\n        });\n        i0.ɵɵtext(26, \" Load More \");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedSortValue);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.productBrandId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"value\", 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.brandArr);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productDetails);\n      }\n    },\n    dependencies: [i9.NgForOf, i10.NgSelectOption, i10.ɵNgSelectMultipleOption, i10.SelectControlValueAccessor, i10.NgControlStatus, i10.NgModel, i11.MatButton],\n    styles: [\".mat-grid-tile[_ngcontent-%COMP%]{border:1px solid grey;border-radius:5px}.home-page-product-image[_ngcontent-%COMP%]{max-width:90%;max-height:90%;position:absolute;inset:0;margin:auto}.image-container[_ngcontent-%COMP%]{position:relative;height:200px}img[_ngcontent-%COMP%], figure[_ngcontent-%COMP%]{max-width:50%;max-height:90%;height:auto;vertical-align:middle;align-items:center}.card-img-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;margin:auto;padding:var(--cz-card-img-overlay-padding);border-radius:var(--cz-card-inner-border-radius)}.card-img[_ngcontent-%COMP%], .card-img-top[_ngcontent-%COMP%], .card-img-bottom[_ngcontent-%COMP%]{max-width:90%;max-height:90%}.card-img[_ngcontent-%COMP%], .card-img-top[_ngcontent-%COMP%]{position:relative;height:200px;border-top-left-radius:var(--cz-card-inner-border-radius);border-top-right-radius:var(--cz-card-inner-border-radius)}.card-img[_ngcontent-%COMP%], .card-img-bottom[_ngcontent-%COMP%]{align-items:center;border-bottom-right-radius:var(--cz-card-inner-border-radius);border-bottom-left-radius:var(--cz-card-inner-border-radius)}\"]\n  });\n  return ProductCategoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}